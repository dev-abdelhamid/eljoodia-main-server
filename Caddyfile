aljodia.com, www.aljodia.com {
    encode gzip
    tls admin@aljodia.com

    handle /api/* {
        reverse_proxy localhost:3000
    }
    handle /socket.io/* {
        reverse_proxy localhost:3000
    }

    handle /sounds/* {
        root * /app/sounds
        file_server
    }
    handle /uploads/* {
        root * /app/uploads
        file_server
    }

    # SPA Frontend - الحل الأبسط والمضمون
    root * /dist
    @spa {
        not path /api/* /socket.io/* /sounds/* /uploads/*
        not file
    }
    rewrite @spa /index.html
    try_files {path} /index.html
    file_server
}